# photocup-server-test
22-2 photocup 성능 테스트 정리

photocup 프로젝트에서 사용된 AI 모듈의 객체 인식 정확도를 측정한 코드입니다.
용량 문제로 사용한 모델인 yolov3 weight 파일은 첨부하지 않아 코드를 돌려볼 순 없습니다.

객체를 인식하는 Detect 과정, 인식한 객체가 어떠한 것인지 분류하는 Classify 과정 을 각각 평가하였습니다.

1. Detect 과정 정확도 측정
셔터스톡 사이트 내 15가지의 카테고리로 분류된 사진을 각 카테고리별 50장씩 가져와 Detect 성능 평가를 진행하였다.
카테고리별 폴더를 생성하여 50장씩 이미지를 가져와 test를 진행 하였고, precision 및 recall 에 대한 수치를 파악하기 위해 해당 카테고리에 속하지 않은 50장의
사진을 표본에 추가하여 테스트를 진행 하였다.

![image](https://user-images.githubusercontent.com/39343594/231318391-c3ab2684-a74c-4db9-95b5-fc0d3042dbae.png)

모든 카테고리의 성능치 평균은 mAP = 0.123을 기록 하였으며, Yolov3 자체의 성능만 놓고 보았을때 카테고리별 분류 성능이 떨어짐을 볼 수 있다. 이는 향후, 더 나은
Object Detection 성능을 보유한 모델로 교체함에 따라 해결할 수 있을것으로 보인다.

2. Classify 과정 정확도 측정
총 100가지의 다수의 객체가 검출되는 사진 내에서, 사람이 직접 선택한 카테고리와 centerness를 통해 판단한 카테고리를 비교하여 정확도를 측정하였다. 이때 정답표본인
사람이 직접 선택한 카테고리는 객관성을 위해 5명의 외부 테스트 인력의 결과를 종합하여 결정하였다.
centerness를 통해 검출한 사진의 카테고리와 사람이 판단한 카테고리를 비교한 결과이다. 총 100개의 이미지 중 72개의 사진 카테고리를 올바르게 분류 하였고, 28개의
사진을 분류하지 못하여 총 72%의 정확도를 보였다.

분류하지 못한 사진들은 다음과 같다.

![image](https://user-images.githubusercontent.com/39343594/231318778-8d343c4a-9a81-4572-a3f0-d2c859a7706f.png)

우측 그림의 경우 사람보다 가운데에 포함되어 있는 객체를 인식하여 메인 객체라고 판단하였고, 좌측 그림의 경우 스키를 타고 있는 '사람'이라 분류단이 답변 하였으나,
centerness에 의해 스키 도구가 메인 객체로 판단 되었고, 오검출 되었다.

이러한 오답들을 통해 centerness 방식의 단점을 분석할 수 있었고, 향후 정확도를 더 높이기 위해 검출된 객체의 크기 비율에 따라 메인 객체 점수 증가폭을 달리하여
메인 객체를 검출하는 방식을 고민해 볼 예정이다.
